<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2014-10-11 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>P6Spy - </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20141011" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                P6Spy
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                  <div class="xright">        
                    
                 <span id="publishDate">Last Published: 2014-10-11</span>
              &nbsp;| <span id="projectVersion">Version: 2.1.2-SNAPSHOT</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>User's Guide</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../1.3/install.html" title="1.3">1.3</a>
                  </li>
                                                                                                                                                                                                            <li class="expanded">
                          <a href="../2.0/install.html" title="2.x">2.x</a>
                    <ul>
                      <li class="none">
                          <a href="../2.0/install.html" title="Installation">Installation</a>
            </li>
                      <li class="none">
                          <a href="../2.0/integration.html" title="Integration">Integration</a>
            </li>
                      <li class="none">
                          <a href="../2.0/configandusage.html" title="Configuration and Usage">Configuration and Usage</a>
            </li>
                      <li class="none">
                          <a href="../2.0/releasenotes.html" title="Release Notes">Release Notes</a>
            </li>
                      <li class="none">
            <strong>Known Issues</strong>
          </li>
                      <li class="none">
                          <a href="../2.0/faq.html" title="FAQ">FAQ</a>
            </li>
                      <li class="none">
                          <a href="../2.0/troubleshooting.html" title="Troubleshooting">Troubleshooting</a>
            </li>
                      <li class="none">
                          <a href="../2.0/development.html" title="Development">Development</a>
            </li>
              </ul>
        </li>
          </ul>
                       <h5>Other</h5>
                  <ul>
                  <li class="none">
                          <a href="../thanks.html" title="Thanks">Thanks</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/p6spy/p6spy/wiki/Download" class="externalLink" title="Download">Download</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                    <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Known Issues</h1>
<div class="section">
<h2>Non-standard (driver specific) JDBC methods are not directly accessible<a name="Non-standard_driver_specific_JDBC_methods_are_not_directly_accessible"></a></h2>
<p>Many drivers provide methods that expose driver-specific, non-standard functionality. Most developers do not use these features, but in the event that an application does use these features they are not natively supported by P6Spy. For example, the MySQL JDBC drivers allow you to call the auto-increment function as follows:</p>

<div class="source">
<pre>((com.mysql.jdbc.PreparedStatement)stmt).getLastInsertId();
</pre></div>
<p>This fails when P6Spy is active since the prepared statement is actually a proxy generated by P6Spy. Since the proxy is not a subclass of com.mysql.jdbc.PreparedStatement, the cast fails. The only workaround available requires code changes to the application.</p>
<p>All proxies generated by P6Spy implement the <a class="externalLink" href="http://docs.oracle.com/javase/6/docs/api/java/sql/Wrapper.html">java.sql.Wrapper</a> interface. This interface is part of the JDBC 4.0 API (Java 6 and later). This provides a standard way to unwrap the proxied object to obtain access to driver specific methods.</p>

<div class="source">
<pre>// assuming MySQL JDBC driver
PreparedStatement stmt = connection.prepareStatement(&quot;....&quot;);
if( stmt.isWrapperFor(com.mysql.jdbc.PreparedStatement.class) {
  com.mysql.jdbc.PreparedStatement mySqlStmt = stmt.unwrap(com.mysql.jdbc.PreparedStatement.class);
  mySqlStmt.getLastInsertId();
}
</pre></div>
<p>Technically, the proxies generated by P6Spy will implement all interfaces implemented by the actually object (connection, statement, etc). If the method that you need to access is defined in an interface, then you will not need to unwrap the object at all. For example, Oracle adds the method setRemarksReporting to the Connection. Since the method is defined in the interface <a class="externalLink" href="http://docs.oracle.com/cd/E18283_01/appdev.112/e13995/oracle/jdbc/OracleConnection.html">OracleConnection</a>, it is available through the proxy.</p>
<p>Please be aware that any P6Spy will not be able to log any actions performed against the unwrapped object. This is perfectly fine as long as you are only using the non-standard functionality. However, if you use the unwrapped PreparedStatement in the example above to execute a SQL statement, it would not be logged.</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2002-2014
                      P6Spy.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
