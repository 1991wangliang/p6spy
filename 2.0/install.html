<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2013-10-09 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>P6Spy - </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20131009" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                P6Spy
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                  <div class="xright">        
                    
                 <span id="publishDate">Last Published: 2013-10-09</span>
              &nbsp;| <span id="projectVersion">Version: 2.0-SNAPSHOT</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>User's Guide</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="../1.3/install.html" title="1.3">1.3</a>
                  </li>
                                                                                                                                                                        <li class="expanded">
            <strong>2.0</strong>
                  <ul>
                      <li class="none">
            <strong>Installation</strong>
          </li>
                      <li class="none">
                          <a href="../2.0/configandusage.html" title="Configuration and Usage">Configuration and Usage</a>
            </li>
                      <li class="none">
                          <a href="../2.0/releasenotes.html" title="Release Notes">Release Notes</a>
            </li>
                      <li class="none">
                          <a href="../2.0/knownissues.html" title="Known Issues">Known Issues</a>
            </li>
                      <li class="none">
                          <a href="../2.0/faq.html" title="FAQ">FAQ</a>
            </li>
                      <li class="none">
                          <a href="../2.0/troubleshooting.html" title="Troubleshooting">Troubleshooting</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="../thanks.html" title="Thanks">Thanks</a>
            </li>
          </ul>
                       <h5>Modules</h5>
                  <ul>
                  <li class="none">
                          <a href="../p6spy/index.html" title="P6Spy">P6Spy</a>
            </li>
                  <li class="none">
                          <a href="../p6spy-webcontrol/index.html" title="P6Spy WebControl">P6Spy WebControl</a>
            </li>
                  <li class="none">
                          <a href="../p6spy-dist/index.html" title="P6Spy Distribution">P6Spy Distribution</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                        <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>P6Spy Installation</h1>
<p>This installation documentation contains instructions for installing P6Spy with various application servers. In addition, it contains general installation instructions for application servers not listed and applications that do not use application servers. Keep in mind that the <a href="install.html#unspec">Unspecified Application Server</a> instructions do not contain details specific to your application server. Use them only as a guideline. If you create instructions for other application servers, send us a copy for possible publication in the documentation.</p>
<p>The installation instructions for each app server assume that you are using a MySQL database. MySQL is only being used as an example for the purposes of this documentation. You simply need to use the correct connection URL and driver class as appropriate for your database.</p>
<p>All instructions also assume *nix operating system. Again, this is just for the purposes of the documentation. For installation on Windows platforms, just substitute <b>p6spy-dist.zip</b> for <b>p6spy-dist.tar.gz</b>.</p>
<p>The installed P6Spy software offers many configuration options. See <a href="configandusage.html#settings">Common Property File Settings</a> for additional information.</p>
<div class="section">
<h2><a name="unspec">Generic Instructions</a><a name="Generic_Instructions"></a></h2>
<p>The following installation instructions are intended for use with application servers not listed below and applications that do not use application servers. To install P6Spy, complete the following steps:</p>

<ol style="list-style-type: decimal">
  
<li>Extract the <b>p6spy-dist.tar.gz</b> file. The <b>p6spy-dist.tar.gz</b> file contains <b>p6spy.jar</b> and <b>spy.properties</b>.</li>
  
<li>Put the <b>p6spy.jar</b> file in your classpath.</li>
  
<li>Put <b>spy.properties</b> into a directory which is on the classpath. Many application servers have a directory for  configuration files which are accessible via the classpath. Most applications which do not run an application  server will have one as well.</li>
  
<li>
<p>Modify the JDBC connection URL in your database connection configuration to add p6spy.</p>
  
<div class="source">
<pre> jdbc:p6spy:mysql://&lt;hostname&gt;:&lt;port&gt;/&lt;database&gt;
</pre></div></li>
</ol>
<p>Installation is complete. When you run your application, a <b>spy.log</b> file is generated. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file (see <a href="configandusage.html#settings">Common Property File Settings</a>).</p></div>
<div class="section">
<h2>JBoss<a name="JBoss"></a></h2>
<p>The following sections contain specific information on installing P6Spy on <a href="#jboss5.x">JBoss 5.x</a></p>
<div class="section">
<h3><a name="jboss5.x">JBoss 5.x</a><a name="JBoss_5.x"></a></h3>
<p>The following instructions were tested with JBoss 5.2.0 EAP. For these instructions, P6Spy assumes that you are using the default server residing in <tt>$JBOSS_DIST\server\default</tt>, where $JBOSS_DIST is the directory in which JBoss is installed. To install P6Spy on JBoss 5.x, complete the following steps:</p>

<ol style="list-style-type: decimal">
  
<li>Extract the <b>p6spy-dist.tar.gz</b> file. The <b>p6spy-dist.tar.gz</b> file contains <b>p6spy.jar</b> and <b>spy.properties</b>.</li>
  
<li>Move the <b>p6spy.jar</b> file to the <tt>$JBOSS_DIST\server\default\lib</tt> directory.</li>
  
<li>Move the <b>spy.properties</b> file to the <tt>$JBOSS_DIST\server\default\conf</tt> directory.</li>
  
<li>
<p>Update the data source in <tt>$JBOSS_DIST\server\default\deploy</tt>. This file is normally called `?????-ds.xml&#x2019;.  An example of the pertinent portions (not the complete XML file) follows:</p>
  
<div class="source">
<pre>&lt;jndi-name&gt;MySqlDS&lt;/jndi-name&gt;
&lt;connection-url&gt;jdbc:p6spy:mysql://mysql-hostname:3306/jbossdb&lt;/connection-url&gt;
&lt;driver-class&gt;com.mysql.jdbc.Driver&lt;/driver-class&gt;
</pre></div></li>
</ol>
<p>Installation is complete. When you run your application, a log file ( <b>spy.log</b> ) is generated in the bin directory of the JBoss server. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file (see <a href="configandusage.html#settings">Common Property File Settings</a>).</p></div></div>
<div class="section">
<h2>Apache Tomcat<a name="Apache_Tomcat"></a></h2>
<p>The following instructions were tested with Apache Tomcat 6.x. For these instructions, it is assumed that $CATALINA_HOME refers to the tomcat installation directory.</p>

<ol style="list-style-type: decimal">
  
<li>Extract the <b>p6spy-dist.tar.gz</b> file. The <b>p6spy-dist.tar.gz</b> file contains <b>p6spy.jar</b> and <b>spy.properties</b>.</li>
  
<li>Move the <b>p6spy.jar</b> file to the lib directory. An example of the path to your  lib directory is <tt>$CATALINA_HOME\lib\</tt>.</li>
  
<li>Move the <b>spy.properties</b> file to the conf directory. An example of the path to your  conf directory is <tt>$CATALINA_HOME\conf\</tt>.</li>
  
<li>
<p>Modify the JDBC connection URL to include p6spy. Tomcat applications obtain their JDBC connection in a variety of ways.  If your application is using a JNDI data source, then consult the Tomcat docs for the various locations where the  database connection could be configured. If the application created its own connection pools, then there will likely  be an application specific configuration file. Once you have found the database connection configuration, just modify  the connection url as per the example below.</p>
  
<div class="source">
<pre>jdbc:p6spy:mysql://localhost/localdb
</pre></div></li>
</ol>
<p>Installation is complete. When you run your application, a log file ( <b>spy.log</b> ) is generated in the directory from which you launched the application. The log file contains a list of all of the database statements executed. You can change both the destination of <b>spy.log</b> and what it logs by editing the <b>spy.properties</b> file (see <a href="configandusage.html#settings">Common Property File Settings</a>).</p></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2013.
          All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
